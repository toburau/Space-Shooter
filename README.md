# Space-Shooter
## 今回のテーマ：全方位シューティング
これからGodotを使って全方位シューティングを作っていく  
1画面固定、左スティックで移動、右スティックで弾を発射  
敵は体当たりタイプ、一定距離まで来て弾を発射して逃げていくタイプ  
岩石の障害物あり

### 100日チャレンジ6日目
プレイヤー作成、スティックで移動できるように

### 100日チャレンジ7日目
弾のシーンを作成  
キー入力で弾を発射できるようにしたが、座標がおかしい  
プレイヤーのシーンしかないため、プレイヤーの子どもになり、ずれてしまう  
ステージのシーンを追加しないと

### 100日チャレンジ8日目
ステージのシーンを追加  
そこにプレイヤーのシーンを、子シーンをインスタンス化で追加  
右スティックを倒した方向にプレイヤーを向けるように  
プレイヤーの銃口の位置にMarker2Dを追加  
スティックを倒している間、クールダウンタイムをつけて一定間隔で弾を発射するように  

### 100日チャレンジ9日目
障害物の小惑星のシーンを追加  
テクスチャ素材が4種類あったので、スクリプトでTexture2Dの配列を作成し、そこに素材をセット  
起動時にランダムで選択するように  

### 100日チャレンジ10日目
小惑星を大量発生させてみた  
プレイヤーはArea2Dなのですり抜けてしまう  

### 100日チャレンジ11日目
プレイヤーをArea2DからCharacterBody2Dへ変更  
慣性を付けて、画面端でループするようにも変更  

### 100日チャレンジ12日目
小惑星がプレイヤーの弾に当たったら消えるように  
さらに分裂するように別サイズのシーンを作成開始  
OBS Studioをインストールして、プレイ画面をキャプチャ  
Shotcutをインストールして余分な部分をカット  

### 100日チャレンジ13日目
小惑星が撃たれたら、小さいのに分裂させるように  
しかし、instantiateしたシーンにスクリプトがアタッチされないという症状  
スクリプトに変数で定義して、インスペクターで設定した場合は大丈夫だけど、スクリプトでpreloadしたものは駄目っぽい  

### 100日チャレンジ14日目
小惑星が打たれたら、分裂する処理を追加  
分裂したときの動きがいまいちなのは後で修正  

### 100日チャレンジ15日目
体当りしてくるエネミーを追加  
アセットは https://kenney.nl/assets/simple-space を利用  
素材は白黒なのでGodot上で赤色に  
シーン作成して、CharacterBody2DとSprite2DとCoollisionShape2Dを追加  

### 100日チャレンジ16日目
体当りしてくるエネミーの処理実装  
出現したときのプレイヤーの位置に向かってくるように  

### 100日チャレンジ17日目
体当りしてくるエネミーをプレイヤーの方向に角度制限をつけてホーミングするように  
小惑星、エネミーともに画面外に出たときの処理が実装されていなかったのを実装  
ただ、画面外の判定が良くなかったのでいろいろ調整  

### 100日チャレンジ18日目
エネミーを撃って倒せるように  
撃たれたら、爆発シーンに切り替え。爆発テクスチャは https://kenney.nl/assets/smoke-particles を利用  
爆発シーンは一定時間表示のあと、縮小させて消すようにした。GDScriptはコルーチンとTweenを使って楽に書けた  

### 100日チャレンジ19日目
エネミーと小惑星がプレイヤーに当たったときの処理を追加  
ゲームオーバー処理はまだ  

### 100日チャレンジ20日目
弾を撃ってくるエネミーを作成開始  
敵キャラは赤系に統一するため、プレイヤーは青色に変更  
プレイヤーに行って距離近づくように  

### 100日チャレンジ21日目
エネミーを近づいたら回転して逃げる処理を追加  
弾の発射、当たり判定はまだ  

### 100日チャレンジ22日目
エネミーの弾作成と、発射の処理を追加  
ChatGPTの嘘に惑わされてけっこう時間がかかってしまった  
Godot 5.5 から angle_difference() が使えるらしいので、バージョンアップした  

### 100日チャレンジ23日目
エネミーの弾をプレイヤーに当たるようにした  
コリジョンレイヤーも設定  
_on_body_entered() が呼び出されないと思ったら、シグナルの接続をしていなかった  

### 100日チャレンジ24日目
エネミーがプレイヤーの弾でやられるように  
コリジョンフィルターの設定があっていなかったので修正  
敵キャラの動作を一通り実装したので、ランダムで敵が出現するようにしてみた  
ゲームっぽくなったけど、面白くするにはいろいろ調整しないと  

### 100日チャレンジ25日目
タイトル画面の追加。新規シーンで作成  
シーンルートにControl。その子供にLabelでゲーム名。VBoxContainerを追加し、そこにButtonでStartとExitを追加した  
ゲーム名は元のアセット名の「Space Shooter」にした。  

### 100日チャレンジ26日目
タイトル画面のメニューを選択できるように  
タイトル起動時にgrab_focus()でStartボタンにフォーカスを設定  
インプットマップで、ui_acceptにパッドのxボタンをアサイン  
UIの上下はパッドでもアサインされていたけど、決定はパッドでは何もアサインされていなかった。なぜだろう  

### 100日チャレンジ27日目
ゲームオーバー画面の追加  
ステージに追加。CanvasLayer > Control > Label という構成にした  

### 100日チャレンジ28日目
ゲームオーバー画面の実装  
プレイヤーがやられてからちょっと待ってからGAMEOVERのテキストを表示  
更に少し待ってからタイトル画面へ遷移  
プレイヤーがやられたあと、CollisionShape2D.disable を true にしたが、再び別の敵などにヒットしてしまうので、collision_layer と collision_mask に0を設定するようにして対応  
